---
title: ジャーニーのテスト
description: '遍歴のテストについて '
page-status-flag: never-activated
uuid: 269d590c-5a6d-40b9-a879-02f5033863fc
contentOwner: sauviat
audience: rns
content-type: reference
topic-tags: journeys
discoiquuid: 5df34f55-135a-4ea8-afc2-f9427ce5ae7b
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: be21573973600758cbf13bd25bc3b44ab4cd08ca
workflow-type: tm+mt
source-wordcount: '1103'
ht-degree: 1%

---


# ジャーニーのテスト{#testing_the_journey}

遍歴をテストする前に、すべてのエラーが発生した場合は、それを解決する必要があります。 [](../about/troubleshooting.md#section_h3q_kqk_fhb)を参照してください。

テストプロファイルを使用して、パブリケーションの前にジャーニーをテストできます。 これにより、個人が旅の途中でどのように流れるかを分析し、公開前のトラブルシューティングを行うことができます。

テストモードを使用するには、次の手順に従います。

1. 遍歴をテストする前に、その遍歴が有効であり、エラーがないことを確認します。 エラーのある遍歴のテストを開始することはできません。 [](../about/troubleshooting.md#section_h3q_kqk_fhb)を参照してください。エラーがある場合は、警告記号が表示されます。

1. テストモードをアクティブにするには、右上隅にある「 **[!UICONTROL テスト]** 」トグルをクリックします。

   ![](../assets/journeytest1.png)

1. 左下隅の **Wait time in test** parameterを使用して、各待機アクティビティがテストモードで持続する時間を定義します。 デフォルト時間は 10 秒です。これにより、テスト結果を迅速に取得できます。 このパラメーターは、1つ以上の待機アクティビティーを遍歴にドロップした場合にのみ表示されます。

   ![](../assets/journeytest_wait.png)

1. 「 **[!UICONTROL イベントをトリガー]** 」をクリックして、イベントを設定し、遍歴に送信します。 テストプロファイルに関連するイベントを送信してください。 詳しくは、 [イベントの実行を参照してください](#firing_events)。

   ![](../assets/journeyuctest1.png)

1. イベントを受け取ったら、「 **[!UICONTROL Show log]** 」ボタンをクリックしてテスト結果を表示し、確認します。 詳しくは、ログの [表示を参照してください](#viewing_logs)。

   ![](../assets/journeyuctest2.png)

1. エラーが発生した場合は、テストモードを非アクティブ化し、遍歴を変更して再度テストします。 テストが決定的な場合は、遍歴を公開できます。 [](../building-journeys/publishing-the-journey.md)を参照してください。

## 重要な注意事項 {#important_notes}

* テスト対象の遍歴に対してイベントを実行するためのインターフェイスが提供されますが、イベントはPostmanなどのサードパーティ製システムからも送信できます。
* リアルタイム顧客プロファイルサービスで「テストプロファイル」としてフラグ付けされた個人のみがテスト済みの遍歴に参加できます。 テストプロファイルを作成するプロセスは、Data Platformでプロファイルを作成するプロセスと同じです。 テストプロファイルフラグがtrueであることを確認するだけです。 Data Platformインターフェイスの「Segments」セクションを使用すると、Data Platformでテストプロファイルのセグメントを作成し、完全でないリストを確認できます。 現時点では、完全なリストは表示できません。
* テストモードは、名前空間を使用するドラフトジャーニーでのみ使用できます。 実際、テストモードでは、遍歴に入る人がテストプロファイルかどうかを確認する必要があります。したがって、テストモードでは、データプラットフォームに到達できる必要があります。
* テストプロファイルの最大数は、1回のテストセッション中にジャーニーに参加できる最大数は100です。
* テストモードを無効にすると、過去にテストモードに入った人や現在参加している人がすべてジャーニーを空にします。
* テストモードは必要な回数だけ有効または無効にできます。
* テストモードがアクティブになっている場合は、遍歴を変更できません。 テストモードでは、ジャーニーを直接公開できるので、以前にテストモードを非アクティブ化する必要はありません。

## イベントの実行 {#firing_events}

「 **[!UICONTROL イベントをトリガー]** 」ボタンを使用すると、人が旅に出るイベントを設定できます。

前提条件として、データプラットフォームでテストプロファイルとしてフラグ付けされたプロファイルを把握する必要があります。 実際、テストモードでは、これらのプロファイルを遍歴でのみ使用でき、イベントにIDを含める必要があります。 必要なIDは、イベントの設定に応じて異なります。 例えば、ECIDを指定できます。

遍歴に複数のイベントが含まれる場合は、ドロップダウンリストを使用してイベントを選択します。 次に、各イベントに対して、渡されるフィールドと送信するイベントの実行を設定します。 インターフェイスは、イベントペイロードに正しい情報を渡し、情報タイプが正しいことを確認するのに役立ちます。 テストモードでは、後で使用するために、テストセッションで最後に使用したパラメーターが保存されます。

![](../assets/journeytest4.png)

このインターフェイスを使用すると、単純なイベントパラメーターを渡すことができます。 イベント内のコレクションや他の高度なオブジェクトを渡す場合は、 **[!UICONTROL コード表示]** をクリックしてペイロードのコード全体を表示し、変更できます。 例えば、技術ユーザーが用意したイベント情報をコピーして貼り付けることができます。

![](../assets/journeytest5.png)

テクニカルユーザーは、このインターフェイスを使用してイベントペイロードを作成し、サードパーティのツールを使用せずにイベントをトリガーすることもできます。

「 **送信** 」ボタンをクリックすると、テストが開始されます。 個人の進行は視覚的な流れで表されます 個々の人が旅を進むにつれて、道は次第に緑色に変わります。 エラーが発生した場合は、対応する手順に警告記号が表示されます。 カーソルをカーソルの上に置くと、エラーに関する詳細情報を表示し、（利用可能な場合は）詳細な情報にアクセスできます。

![](../assets/journeytest6.png)

イベント設定画面で別のテストプロファイルを選択し、再びテストを実行すると、視覚的なフローがクリアされ、新しい個人のパスが表示されます。

テストで遍歴を開くとき、表示されるパスは最後に実行されたテストに対応します。

視覚的なフローは、イベントがインターフェイスを介してトリガーされるか、外部（例えばPostmanを使用する）によってトリガーされるかに関係なく機能します。

## ログの表示 {#viewing_logs}

「 **[!UICONTROL ログを表示]** 」ボタンを使用すると、テスト結果を表示できます。 このページには、ジャーニーの現在の情報がJSON形式で表示されます。 ボタンを使用すると、ノード全体をコピーできます。 このページを手動で更新して、ジャーニーのテスト結果を更新する必要があります。

![](../assets/journeytest3.png)

>[!NOTE]
>
>テストログでは、サードパーティのシステム（データソースまたはアクション）の呼び出し時にエラーが発生した場合、エラーコードとエラー応答が表示されます。

現在、遍歴に含まれる個人（技術的にはインスタンスと呼ばれます）の数が表示されます。 次に、各ユーザーに対して表示される役立つ情報を示します。

* _ID_: 個人の内部IDを取得します。 これは、デバッグ目的で使用できます。
* _currentstep_: 個人が旅の中で歩いている段階です アクティビティを識別しやすくするために、ラベルをに追加することをお勧めします。
* _currentstep_ > phase: 個人の遍歴のステータス（実行、完了、エラーまたはタイムアウト）。 詳しくは、以下を参照してください。
* _currentstep_ > _extraInfo_: エラーの説明と、その他のコンテキスト情報。
* _currentstep_ > _fetchErrors_: この手順中に発生したデータ取得エラーに関する情報です。
* _externalKeys_: イベントで定義されているキー数式の値。
* _enrichedData_: ジャーニーがデータソースを使用している場合に取得したデータ。
* _transitionHistory_: 個人が従った手順のリスト。 イベントの場合、ペイロードが表示されます。
* _actionExecutionErrors_ : 発生したエラーに関する情報。

個人の遍歴の様々なステータスを次に示します。

* _実行中_: 個人は現在旅行中です。
* _完了_: 個人は旅の終わりだ。
* _エラー_: 人は誤りのために旅の途中で止まる。
* _タイムアウト_: 時間がかかりすぎたため、個人は旅の途中で止まる。
